@using PBL3.Data;
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Search Page";
}

@model SearchViewModel;

@if (User.IsInRole(UserRole.Admin) || User.IsInRole(UserRole.Staff))
 {
    <ul class="nav nav-pills"> 
        <li class="nav-item ">
            <a class="nav-link active rounded-0" id="Titles" data-toggle="pill" href="#home" onclick="Enable1('#Titles','#AccNames','#home','#menu1')">Titles</a>
        </li>
        <li class="nav-item">
            <a class="nav-link rounded-0" id="AccNames" data-toggle="pill" href="#menu1" onclick="Enable1('#AccNames','#Titles','#menu1','#home')">AccNames</a>
        </li>     
    </ul>  
 }
 <label>Sắp xếp theo</label>
 <div class="dropdown">
    <select name="sortOrder" class="" title="Tiêu chí"></select>
        <div class="dropdown-content">
           <a id = "TitlesSearch" asp-action = "Index" asp-route-name="@ViewBag.Name" asp-route-sortOrder="asc" asp-route-sortType="name"><option>Tăng dần theo tên sách</option></a>
           <a id="TitlesSearch" asp-action="Index" asp-route-name="@ViewBag.Name" asp-route-sortOrder="desc" asp-route-sortType="name">Giảm dần theo tên sách</a>
           <a id="TitlesSearch" asp-action="Index" asp-route-name="@ViewBag.Name" asp-route-sortOrder="asc" asp-route-sortType="date">Tăng dần theo năm xuất bản</a>
           <a id="TitlesSearch" asp-action="Index" asp-route-name="@ViewBag.Name" asp-route-sortOrder="desc" asp-route-sortType="date">Giảm dần theo năm xuất bản</a>
           <a id="AccountsSearch" asp-action="Index" asp-route-name="@ViewBag.Name" asp-route-sortOrder="asc" asp-route-sortType="name">Tăng dần theo tên tài khoản</a>
           <a id="AccountsSearch" asp-action="Index" asp-route-name="@ViewBag.Name" asp-route-sortOrder="desc" asp-route-sortType="name">Giảm dần theo tên tài khoản</a>
           <a id="AccountsSearch" asp-action="Index" asp-route-name="@ViewBag.Name" asp-route-sortOrder="asc" asp-route-sortType="date">Tăng dần theo ngày sinh</a>
           <a id="AccountsSearch" asp-action="Index" asp-route-name="@ViewBag.Name" asp-route-sortOrder="desc" asp-route-sortType="date">Giảm dần theo ngày sinh</a>
        </div>
</div>
 
<div class="tab-content">  
    <div class="tab-pane container active p-0" id="home">  
        <h5 class="text-uppercase p-2 text-center">List of Books</h5>  
        <table class="table table-bordered table-striped">  
            <thead class="thead-dark text-dark">  
                <tr>  
                    <th>Id</th>  
                    <th>Tên đầu sách</th>  
                    <th>Tên tác giả</th>  
                    <th>Kệ sách</th>  
                    <th>Năm xuất bản</th>  
                </tr>  
            </thead>  
            <tbody>  
                @foreach (var title in Model.Titles)
                {  
                        <tr>  
                            <td>@title.IdTitle</td>  
                            <td>@title.NameBook</td>  
                            <td>@title.NameWriter</td>  
                            <td>@title.NameBookshelf</td>  
                            <td>@title.ReleaseYear</td>
                            <td>
                                <a asp-controller="Titles" asp-action="Details" asp-route-id="@title.IdTitle">Detail</a>
                                @if (!User.IsInRole("User") && User.Identity.IsAuthenticated)
                                {                     
                                    <a asp-controller = "Titles" asp-action="Edit" asp-route-id="@title.IdTitle">Edit</a>
                                    <a asp-controller = "Titles" asp-action="Delete" asp-route-id="@title.IdTitle">Delete</a>
                                }
                            </td>
                        </tr>  
                }  
            </tbody>  
        </table>  
    </div>
    @if (User.IsInRole(UserRole.Admin) || User.IsInRole(UserRole.Staff))
    {
        <div class="tab-pane container fade p-0" id="menu1">  
            <h5 class="text-uppercase p-2 text-center">List of Accounts</h5>  
            <table class="table table-bordered table-striped">  
                <thead class="thead-dark text-dark">  
                    <tr>  
                        <th>Mã số sinh viên</th>  
                        <th>Tên tài khoản</th>  
                        <th>Số điện thoại</th>
                        <th>Email</th> 
                        <th>Ngày sinh</th> 
                    </tr>  
                </thead>  
                <tbody>  
                    @foreach (var Account in Model.Accounts)
                    {
                        <tr>  
                            <td>@Account.Mssv</td>  
                            <td>@Account.AccName</td>  
                            <td>@Account.Phone</td> 
                            <td>@Account.Email</td>
                            <td>@Account.DateOfBirth</td>
                            <td>
                                <a asp-controller = "Accounts" asp-action="Edit" asp-route-id="@Account.AccName">Edit</a> |
                                <a asp-controller="Accounts" asp-action="Details" asp-route-id="@Account.AccName">Details</a> |
                                <a asp-controller="RentBook" asp-action="UserRentals" asp-route-accName="@Account.AccName">Rentals</a> |
                                <a asp-controller="Accounts" asp-action="Delete" asp-route-id="@Account.AccName">Delete</a>
                            </td>
                        </tr>
                    }  
                </tbody>  
            </table>  
        </div>
    }
</div>  