@using PBL3.Data;
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Search Page";
    var sort1 = ViewBag.Name + "1";
    var sort2 = ViewBag.Name + "2";
    var sort3 = ViewBag.Name + "3";
    var sort4 = ViewBag.Name + "4";
    var sort5 = ViewBag.Name + "5";
    var sort6 = ViewBag.Name + "6";
}

@model SearchViewModel;

@if (User.IsInRole(UserRole.Admin) || User.IsInRole(UserRole.Staff))
 {
    <ul class="nav nav-pills"> 
        <li class="nav-item ">
            <a class="nav-link active rounded-0" id="Titles" data-toggle="pill" href="#home" onclick="Enable1('#Titles','#AccNames','#home','#menu1','#Title','Accounts')">Titles</a>
        </li>
        <li class="nav-item">
            <a class="nav-link rounded-0" id="AccNames" data-toggle="pill" href="#menu1" onclick="Enable1('#AccNames','#Titles','#menu1','#home','#Accounts', '#Title')">AccNames</a>
        </li>     
    </ul>  
 }
 <label>Sắp xếp theo</label>
 <form method="post" asp-action="Sort">
    <select name="sortOrder" class="" title="Tiêu chí">
        <option id="Title" class="active" value= "@sort1">Tăng dần theo tên sách</option>
        <option id="Title" class="active" value= "@sort2">Giảm dần theo tên sách</option>
        <option id="Title" class="active"value= "@sort3">Tăng dần theo năm xuất bản</option>
        <option id="Title" class="active" value= "@sort4">Giảm dần theo năm xuất bản</option>
        @if (User.IsInRole(UserRole.Admin) || User.IsInRole(UserRole.Staff))
        {
            <option id ="Accounts" class ="fade" value= "@sort5">Tăng dần theo năm sinh</option>
            <option id = "Accounts" class="fade" value= "@sort6">Giảm dần theo năm sinh</option>
        }
    </select>
    <button type="submit" class = "btn btn-outline-primary">Sort</button>
</form>
 
<div class="tab-content">  
    <div class="tab-pane container active p-0" id="home">  
        <h5 class="text-uppercase p-2 text-center">List of Books</h5>  
        <table class="table table-bordered table-striped">  
            <thead class="thead-dark text-dark">  
                <tr>  
                    <th>Id</th>  
                    <th>Tên đầu sách</th>  
                    <th>Tên tác giả</th>  
                    <th>Kệ sách</th>  
                    <th>Năm xuất bản</th>
                    <th></th>
                </tr>  
            </thead>  
            <tbody>  
                @foreach (var title in Model.Titles)
                {  
                        <tr>  
                            <td>@title.IdTitle</td>  
                            <td> 
                                <a asp-controller="Titles" asp-action="Details" asp-route-id="@title.IdTitle">@title.NameBook</a>
                            </td>  
                            <td>@title.NameWriter</td>  
                            <td>@title.NameBookshelf</td>  
                            <td>@title.ReleaseYear</td>
                            <td>
                                @if (!User.IsInRole("User") && User.Identity.IsAuthenticated)
                                {                   
                                    <a asp-controller = "Titles" asp-action="Edit" asp-route-id="@title.IdTitle">
                                        <i class = "fas fa-edit"></i>
                                    </a>
                                    <span>|</span>
                                    <a style="color: red" asp-controller="Titles" asp-action="Delete" asp-route-id="@title.IdTitle">
                                        <i class="fas fa-trash"></i>
                                    </a>
                                }
                            </td>
                        </tr>  
                }  
            </tbody>  
        </table>  
    </div>
    @if (User.IsInRole(UserRole.Admin) || User.IsInRole(UserRole.Staff))
    {
        <div class="tab-pane container fade p-0" id="menu1">  
            <h5 class="text-uppercase p-2 text-center">List of Accounts</h5>  
            <table class="table table-bordered table-striped">  
                <thead class="thead-dark text-dark">  
                    <tr>  
                        <th>Mã số sinh viên</th>  
                        <th>Tên tài khoản</th>  
                        <th>Số điện thoại</th>
                        <th>Email</th> 
                        <th>Ngày sinh</th>
                        <th></th>
                    </tr>  
                </thead>  
                <tbody>  
                    @foreach (var Account in Model.Accounts)
                    {
                        <tr>  
                            <td>@Account.Mssv</td>
                            <td>
                                <a asp-controller="Accounts" asp-action="Details" asp-route-id="@Account.AccName">@Account.AccName</a>
                            </td>
                            <td>@Account.Phone</td> 
                            <td>@Account.Email</td>
                            <td>@Account.DateOfBirth</td>
                            <td>
                                <a asp-controller="Accounts" asp-action="Edit" asp-route-id="@Account.AccName">
                                    <i class="fas fa-edit"></i>
                                </a> |
                                <a style="color: red" asp-controller="Titles" asp-action="Delete" asp-route-id="@Account.AccName">
                                    <i class="fas fa-trash"></i>
                                </a> |
                                <a asp-controller="RentBook" asp-action="UserRentals" asp-route-accName="@Account.AccName">
                                    <i class="fas fa-book"></i>
                                </a>
                            </td>
                        </tr>
                    }  
                </tbody>  
            </table>  
        </div>
    }
</div>  